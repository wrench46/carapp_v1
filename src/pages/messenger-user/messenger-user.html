<!--
  Generated template for the MessengerUserPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Messages</ion-title>
  </ion-navbar>

  <ion-segment [(ngModel)]="allmessages">
         
      <ion-segment-button value="drivers">
        Drivers
      </ion-segment-button>

      <ion-segment-button value="admin">
       Admin
      </ion-segment-button>


    </ion-segment>

</ion-header>


<ion-content padding>

    <div [ngSwitch]="allmessages">
          
        <ion-list *ngSwitchCase="'drivers'">
            <ion-item  *ngFor="let driver of activedrivers" (click)=goToMessaging(userdetails.id,driver)>
                <ion-avatar item-start>
                  <img src="http://sagla.tech/backend/apps/carapp/uploads/profile/{{driver.id}}/{{driver.profile_pic}}">
                </ion-avatar>
                <h2>{{driver.first_name}} {{driver.last_name}}</h2>
                <h3><!-- - {{futureSched.car_model}} --></h3>
                <p><!-- - Date: {{futureSched.date_rented | date:'mediumDate'}} {{futureSched.rented_date_to | date:'mediumDate'}}--></p>
              </ion-item>
          </ion-list>



          <div  *ngSwitchCase="'admin'">
            
              <div id="chatMessages">
   
                  <div *ngFor="let message of adminchat" [class]="message.specialMessage ? 'message special' : 'message'">
                    <div [class]="message.username == username ? 'innerMessage messageRight' : 'innerMessage messageLeft'">
                      <div class="username" *ngIf="message.username != username && message.specialMessage == null">Admin</div>
                      <div class="username" *ngIf="message.username == username">You</div>
                      <div class="messageContent">{{message.message}}</div>
                    </div>
                  </div>
        
              </div>

              <ion-footer>
                  <ion-toolbar>
                      <div id="footer">
                          <div class="elem"><ion-input type="text" [(ngModel)]="messagetosend"></ion-input></div>
                          <div class="elem"><button ion-button icon-only (click)="sendChatMessage()"><ion-icon name="send"></ion-icon></button></div>
                      </div>
                  </ion-toolbar>
              </ion-footer>

          </div>



</div>

</ion-content>
